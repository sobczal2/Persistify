syntax = "proto3";

option csharp_namespace = "Persistify.Grpc.Protos";

package types;

import "Protos/shared.proto";

message TypeField {
  string path = 1;
  bool indexed = 2;
}

message TypeDefinition {
  string name = 1;
  repeated TypeField typeFields = 2;
}

message InitTypeRequest {
  TypeDefinition typeDefinition = 1;
}

message InitTypeResponse {
  shared.ResponseMetadata metadata = 1;
}

message ListTypesRequest {}

message ListTypesResponse {
  repeated TypeDefinition typeDefinitions = 1;
  shared.ResponseMetadata metadata = 2;
}

message DropTypeRequest {
  string name = 1;
}

message DropTypeResponse {
  shared.ResponseMetadata metadata = 1;
}

service Types {
  rpc InitType(InitTypeRequest) returns (InitTypeResponse) {}
  rpc ListTypes(ListTypesRequest) returns (ListTypesResponse) {}
  rpc DropType(DropTypeRequest) returns (DropTypeResponse) {}
}
