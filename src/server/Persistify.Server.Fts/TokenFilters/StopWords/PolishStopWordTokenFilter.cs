using System.Collections.Generic;
using Persistify.Server.Fts.Abstractions;
using Persistify.Server.Fts.Tokens;

namespace Persistify.Server.Fts.TokenFilters;

public class PolishStopWordTokenFilter : ITokenFilter
{
    private static readonly IReadOnlySet<string> StopWords = new HashSet<string>
    {
        "a",
        "aby",
        "ach",
        "acz",
        "aczkolwiek",
        "albo",
        "ale",
        "ależ",
        "ani",
        "aż",
        "bardziej",
        "bardzo",
        "będą",
        "będzie",
        "bez",
        "będzie",
        "bo",
        "bowiem",
        "by",
        "być",
        "był",
        "była",
        "było",
        "były",
        "bynajmniej",
        "cała",
        "cały",
        "ci",
        "ciebie",
        "cię",
        "co",
        "cokolwiek",
        "coś",
        "czasami",
        "czasem",
        "czemu",
        "czy",
        "czyli",
        "daleko",
        "dla",
        "dlaczego",
        "dlatego",
        "do",
        "dobrze",
        "dokąd",
        "dość",
        "dużo",
        "dwa",
        "dwaj",
        "dwie",
        "dwoje",
        "dziś",
        "dzisiaj",
        "gdy",
        "gdyby",
        "gdyż",
        "gdzie",
        "gdziekolwiek",
        "gdzieś",
        "i",
        "ich",
        "ile",
        "im",
        "inna",
        "inne",
        "inny",
        "innych",
        "iż",
        "ja",
        "jak",
        "jakaś",
        "jakby",
        "jaki",
        "jakichś",
        "jakie",
        "jakiś",
        "jakiż",
        "jakkolwiek",
        "jakoś",
        "je",
        "jeden",
        "jedna",
        "jednak",
        "jednakże",
        "jedno",
        "jego",
        "jej",
        "jemu",
        "jeśli",
        "jeżeli",
        "już",
        "każdy",
        "kiedy",
        "kilka",
        "kimś",
        "kto",
        "ktokolwiek",
        "która",
        "które",
        "którego",
        "której",
        "który",
        "których",
        "którym",
        "którzy",
        "ktoś",
        "ku",
        "lat",
        "lecz",
        "lub",
        "ma",
        "mają",
        "mało",
        "mam",
        "mi",
        "między",
        "mimo",
        "mną",
        "mnie",
        "mogą",
        "moi",
        "moim",
        "moja",
        "moje",
        "może",
        "możliwe",
        "można",
        "mój",
        "mu",
        "musi",
        "my",
        "na",
        "nad",
        "nam",
        "nami",
        "nas",
        "nasi",
        "nasz",
        "nasza",
        "nasze",
        "naszego",
        "naszych",
        "natomiast",
        "natychmiast",
        "nawet",
        "nią",
        "nic",
        "nich",
        "nie",
        "niech",
        "niego",
        "niej",
        "niemu",
        "nigdy",
        "nim",
        "nimi",
        "niż",
        "no",
        "o",
        "obok",
        "od",
        "około",
        "on",
        "ona",
        "one",
        "oni",
        "ono",
        "oraz",
        "oto",
        "owszem",
        "pan",
        "pana",
        "pani",
        "po",
        "pod",
        "podczas",
        "pomimo",
        "ponad",
        "ponieważ",
        "powinien",
        "powinna",
        "powinni",
        "powinno",
        "poza",
        "prawie",
        "przecież",
        "przed",
        "przede",
        "przedtem",
        "przez",
        "przy",
        "roku",
        "również",
        "sam",
        "sama",
        "są",
        "się",
        "skąd",
        "sobie",
        "sobą",
        "sposób",
        "swoje",
        "ta",
        "tak",
        "taka",
        "taki",
        "takie",
        "także",
        "tam",
        "te",
        "tego",
        "tej",
        "temu",
        "ten",
        "teraz",
        "też",
        "to",
        "tobą",
        "tobie",
        "toteż",
        "trzeba",
        "tu",
        "tutaj",
        "twoi",
        "twoim",
        "twoja",
        "twoje",
        "twój",
        "twym",
        "ty",
        "tych",
        "tylko",
        "tym",
        "u",
        "w",
        "wam",
        "wami",
        "was",
        "wasz",
        "wasza",
        "wasze",
        "we",
        "więc",
        "więcej",
        "wszyscy",
        "wszystkich",
        "wszystkie",
        "wszystkim",
        "wszystko",
        "wtedy",
        "z",
        "za",
        "zawsze",
        "ze",
        "zł",
        "że"
    };

    public string Code => "pl-stop-words";

    public void FilterForSearch(
        List<SearchToken> tokens
    )
    {
        for (var i = 0; i < tokens.Count; i++)
        {
            var token = tokens[i];
            if (StopWords.Contains(token.Term.ToLowerInvariant()))
            {
                tokens.RemoveAt(i);
                i--;
            }
        }
    }

    public void FilterForIndex(
        List<IndexToken> tokens
    )
    {
        for (var i = 0; i < tokens.Count; i++)
        {
            var token = tokens[i];
            if (StopWords.Contains(token.Term.ToLowerInvariant()))
            {
                tokens.RemoveAt(i);
                i--;
            }
        }
    }
}
